<!DOCTYPE HTML>
<html>
	<head>
    <meta charset="utf-8" />
    <title>PriCoSha</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.7/semantic.min.css"/>
    <link href="https://fonts.googleapis.com/css?family=Patua+One|Unica+One" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.7/semantic.min.js"></script>

    <style>
    	body {
    		background: #EFEFEF;
    	}
    	#header {
    		padding: 10px;
    		background: white;
    	}
    	.ui.header.title {
    		font-family: 'Unica One', cursive;
    		width: 75vw;
    		margin: auto;
    		color: #FF3B3F;
				letter-spacing: 3px;
    	}

    	.shortcuts {
    		float: right;
    		color: gray;
    	}

    	.shortcuts .icon {
    		cursor: pointer;
    	}

    	.greeting {
    		width: 35vw;
    		text-align: center;
    		margin: auto;
    		padding: 20px;
    		background: #CAEBF2;
    		border-radius: 2px;
    		border: solid 2px white;
    		margin-top: 20px;
    	}

    	.greeting .ui.header {
    		font-family: 'Patua One', cursive;
    		color: #A9A9A9;
    	}

    	.user-actions .ui.basic.button {
    		box-shadow: 0 0 0 1px #FF3B3F inset;
    		background: white !important;
        margin: 5px;
    	}

      #content-modal, 
      #friendGroup-modal {
        position: absolute;
        top: 0px;
        left: 0px;
        width: 100%;
        height: 100%;
        background: rgba(0,0,0,0.5);
        display: none;
      }

      #share {
        display: none;
      }

      #content-modal.active, 
      #friendGroup-modal.active,
      #share.active {
        display: block;
      }

      .ui.segment.content,
      .ui.segment.create {
        width: 50%;
        margin: 75px auto;
      }

      #success-message {
        width: 50%;
        margin: 15px auto;
      }

      #success-message.closed {
        display: none;
      }

      .window.close.outline.icon {
        position: absolute;
        top: 10px;
        right: 10px;
        cursor: pointer;
      }

      .window.close.outline.icon:hover {
        color: #CAEBF2;
      }
  	</style>
  </head>
  <body>
  	<div id="header">
  		<h1 class="ui header title"> PriCoSha 
  			<div class="shortcuts">
	  			<i class="users icon"></i>
	  			<i class="home icon"></i>
	  			<a href="/logout"><i class="sign out icon"></i></a>
	  		</div>
  		</h1>
  	</div>
  	<div id="content">
      <!-- Success Modal -->
      <% if (typeof success !== 'undefined' && success !== null) { %>
        <div id="success-message" class="ui positive message">
          <i class="close icon"></i>
          <div class="header"> Successful Submission </div>
          <p> <%= success %></p>
        </div>
      <% } %>

  		<div class="greeting">
  			<h1 class="ui header"> Hello <%= username %> </h1>
  			<div class="user-actions">
  				<div onclick="toggleModal('content-modal')" class="ui compact labeled icon basic button">
  				  <i class="upload icon"></i> Upload Content
  				</div>
  				<div onclick="toggleModal('friendGroup-modal')" class="ui compact labeled icon basic button">
  					<i class="add square icon"></i> Create FriendGroup 
  				</div>
  			</div>
  		</div>
  		<div class="ui grid">
  		</div>
      
      <!-- Add Content Modal -->
      <div id="content-modal">
        <div class="ui segment content"> 
          <h2 class="ui dividing header">Add Content</h2>
          <i onclick="toggleModal('content-modal')" class="window close outline large icon"></i>
          <form class="ui form">
            <div class="field">
              <label> URL </label>
              <input type="text" name="file_path" placeholder="Paste a URL">
            </div>
            <div class="field">
              <label> Caption </label>
              <input maxlength="50" name="content_name" placeholder="Your text here">
            </div>
            <div class="inline field">
              <div class="ui checkbox">
                <input onclick="toggleModal('share')" type="checkbox" id="private">
                <label for="private">Make content private? </label>
              </div>
            </div>   
            <div id="share" class="ui segment">
              <div class="field">
                <label> Share with which FriendGroup(s)? </label>
              </div>
            </div>   
          </form>
        </div>
      </div>

      <!-- FriendGroup Modal -->
      <% if (error) { %>
      <div id="friendGroup-modal" class="active">
      <% } else { %>
      <div id="friendGroup-modal">
      <% } %> 
        <div class="ui segment create">
          <h2 class="ui dividing header">Create a FriendGroup</h2>
          <i onclick="toggleModal('friendGroup-modal')" class="window close outline large icon"></i>
          <% if (error) { %>
            <div class="ui negative message"> 
              <ul class="list">
                <% err.forEach(errString => { %>
                  <% if (errString !== null) { %>
                    <li> <%= errString %> </li>
                  <% } %>
                <% }) %>
              </ul>
            </div>
          <% } %>
          <form class="ui form" action="/create-group" method="POST">
            <div class="required field">
              <label> Name of FriendGroup </label>
              <input type="text" name="group_name" placeholder="Enter name of FriendGroup">
            </div>
            <div class="field">
              <label> Description </label>
              <textarea rows="2" name="description" placeholder="Enter a description of your FriendGroup here"></textarea>
            </div>
            <div class="required field">
              <label> Add people to your group </label>
              <div class="ui fluid selection search dropdown multiple">
                <input name="members" type="hidden">
                <div class="default text">Search for people to add by username</div>
                <i class="dropdown icon"></i>
                <div class="menu">
                </div>
              </div>
            </div>
            <div class="ui divider"></div>
            <div class="user-actions">
              <input formaction="/create-group" type="submit" value="Create" class="ui primary right floated submit button">
              <button onclick="toggleModal('friendGroup-modal')" class="ui button"> Cancel </button>
            </div>
          </form>
        </div>
      </div>
  	</div>

    <script>
      function toggleModal(id) {
        var contentModal = document.getElementById(id);
        contentModal.classList.toggle("active");
      }
    </script>
    <script>
      $(document).ready(function() {
        $('.ui.dropdown').dropdown({
          allowAdditions: true
        });

        $('.message .close').on('click', function() {
          $(this).closest('.message').transition('fade');
        });

        $(document).on("keypress", 'form', function (e) {
          var code = e.keyCode || e.which;
          if (code == 13) {
            e.preventDefault();
            return false;
          }
        });
      });
    </script>
  </body>
</html>
